<!DOCTYPE html>
<!-- this file is auto-generated from docs/tips.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Gregg Tavares. nor the names of his
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="Tips" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />
<meta property="og:description" content="Tips for making the best HappyFunTimes experiences" />
<meta property="og:url" content="http://docs.happyfuntimes.net/docs/tips.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="docs.happyfuntimes.net" />
<meta name="twitter:title" content="Tips" />
<meta name="twitter:url" content="http://docs.happyfuntimes.net/docs/tips.html" />
<meta name="twitter:description" content="Tips for making the best HappyFunTimes experiences" />
<meta name="twitter:image:src" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />

<title>Tips</title>
<link href="/public/hft-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/docs/css/base.css" type="text/css" />
<link rel="stylesheet" href="/docs/css/lesson.css" type="text/css" />
</head>
<body>
<div class="header">
  <h1><a href="/docs">HappyFunTimes Docs</a></h1>
</div>


<div class="container">
  <div class="lesson-title">
    <h1>Tips</h1>
  </div>
  <div class="row">
    <div class="col-sm-8 lesson-main">
      <ul>
<li><p>Too many players can make some games un-playable.</p>
<p>For example Powpow only allows 6 ships at once. Imagine
it had no limit. Let&#39;s say you have 20 ships each with 3
bullets. That&#39;s 80 things on the screen. Basically the
game would be unplayable. Powpow&#39;s solution is after
6 players there&#39;s a queue of players waiting to get
launched. They collectively control a ghost ship</p>
</li>
<li><p>Always give players something to do</p>
<p>Bombbomb has 2 minute rounds. It used to be if you died you
were out until the round was over. Many players would end up
just leaving and never coming back.</p>
<p>A fix was to put them on the edge of the playfield and let
them throw bombs in to kill off the remaing players. It took
2 iterations to get that right because just putting them
back in was not enough. We also had to show them getting
moved to the side AND we had to tell them on their controller
to keep playing.</p>
</li>
<li><p>Always make the player press something</p>
<p>So far a browser can&#39;t prevent the phone from sleeping
A solution is to make sure the player has a reason to
interact with the phone often.</p>
<p>So for example the hft-garden game requires you press
a button for the butterflies to fly. Without that
players would hold their phone on the edges, play the
game and eventually their phone would go to sleep.</p>
</li>
<li><p>Preventing text selection in the browser</p>
<p>Use this CSS</p>
<pre><code> -moz-user-select: none;
 -webkit-user-select: none;
 -o-user-select: none;
 user-select: none;
</code></pre></li>
<li><p>Preventing images from popping up a context menu</p>
<p>Both Safari on iOS and Chrome on Android will pop
up a context menu &quot;Save Image?&quot; if the user long
presses an image. So prevent that you need both this CSS:</p>
<pre><code>img {
    -moz-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
    user-select: none;
    pointer-events: none;
}
</code></pre><p>And this JavaScript in your <code>controller.js</code></p>
<pre><code>mobileHacks.disableContextMenu();
</code></pre></li>
<li><p>Use the iOS simulator</p>
<p>You probably need to test both landscape and portrait
and 3.5 inch (iPhone4-) and 4.0 inch (iPhone5+) sizes
iOS6, 7, and 8, as well as iPad.</p>
<p>I&#39;d recommend the Android sim but it&#39;s so damn slow.
I know it can be configured to run faster but even then
it takes forever to start where as the iOS simulator
runs nearly immediately and lets you switch devices
nearly immediately.</p>
</li>
<li><p>Use remote debugging.</p>
<p>Both iOS Safari and Chrome Android support remote debugging. Google for it.
It&#39;s awesome!</p>
</li>
<li><p>Make options that don&#39;t need contollers to test your game.</p>
<p>Powpow, Shootshoot, Jumpjump will all use the local
keyboard to run a player if you put <code>?settings={haveServer:false}</code>
at the end of the URL. Boomboom you have to put
<code>?settings={haveServer:false,numLocalPlayers:2}</code></p>
</li>
<li><p>Use URL settings for testing.</p>
<p>Most of the samples, both controllers and games, support
various flags and settings passed in on the URL. This is great
for testing. Example: <code>?settings={debug:true,showState:true,gravity:500}</code> etc..</p>
</li>
<li><p>Show the player&#39;s colors/avatar on the controller.</p>
<p>Since the controller for each game is HTML there&#39;s
no reason not to show the player&#39;s colors and/or
avatar on their screen.</p>
<p>Some games let the controller pick the color. (jamjam, ...)
Other games the game pics the color/style and sends it to the controller
(powpow, jumpjump, boomboom, ...)</p>
</li>
<li><p>Use media queries to adjust the controller by device and/or orientation</p>
<p>In CSS you can use media queries something like this</p>
<pre><code>/* Smartphones (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 320px)
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px)
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px)
and (orientation : portrait) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
}
</code></pre><p>The samples pretty much only use 4 settings</p>
<pre><code>/* Smartphones (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 320px)
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen
and (max-width : 320px) {
/* Styles */
}

/* Everything not a phone ----------- */
@media only screen
and (min-device-width : 768px) {
/* Styles */
}
</code></pre></li>
<li><p>If the controllers doesn&#39;t work in portrait or landscape consider using using the CSS above to inform the user.</p>
<p>Example, if it doesn&#39;t work in portrait then in your HTML</p>
<pre><code>&lt;div id=&quot;turnthescreen&quot;&gt;&lt;div&gt;Turn the Screen &amp;#x21ba;&lt;/div&gt;&lt;/div&gt;
</code></pre><p>Then in your CSS something like</p>
<pre><code>#turnthescreen {
    display: none;
}

@media only screen and (max-width : 360px) {
/* Styles */
    #turnthescreen {
        position: absolute;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        display: block;
        z-index: 1000;
        background-color: red;
        color: white;
    }
}
</code></pre><p>Note: powpow and jumpjump already do this with standard HappyFunTimes support. Copy them.</p>
</li>
<li><p>Use HandJS</p>
<p>Touch events suck balls. Microsoft proposed a much better system
called Pointer events and they provided a polyfill for all browsers
called HandJS that provides pointer events across browser.</p>
<p>NOTE: HandJS is a standard part of HappyFunTimes already and will be
included if you use the <a href="http://docs.happyfuntimes.net/docs/hft/module-Touch.html"><code>Touch</code> module</a>.
I recommend you use the touch module where possible as we can then fix bugs as they come up
across games.</p>
</li>
<li><p>Add invisible divs for input if needed.</p>
<p>For games that have large input areas, like the Simple example, you may
need a large invisible div that covers the entire input area. For example
if you have</p>
<pre><code>&lt;div id=&quot;inputarea&quot; class=&quot;fullsize fullcenter&quot;&gt;
   &lt;div&gt;Touch here&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>And then you do something like</p>
<pre><code>$(&quot;inputarea&quot;).addEventListener(&#39;pointermove&#39;, ...);
</code></pre><p>Whenever the mouse pointer or finger is over that inner <code>&lt;div&gt;Touch here&lt;/div&gt;</code> you&#39;ll
stop getting pointermove events.</p>
<p>To fix it do something like</p>
<pre><code>&lt;div class=&quot;fullsize fullcenter&quot;&gt;
   &lt;div&gt;Touch here&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;inputarea&quot; class=&quot;fullsize fullcenter&quot;&gt;
   &lt;div&gt;Touch here&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>And in CSS</p>
<pre><code>#inputarea {
   position: absolute;
   left: 0px;
   top: 0px;
   z-index: 5;
}
</code></pre><p>This will make the inputarea be above the the first 2 nested divs and will receive
all of the events un-interrupted.</p>
</li>
<li><p>Use CSS class <code>fixheight</code> and mobilehacks.js?</p>
<p>I&#39;m embarrassed to say this but I can&#39;t for the life of me figure out CSS. I set something
to 100% height expecting it to become the same size as its container but for reasons I haven&#39;t
been able to internalize this often doesn&#39;t work. My current solution is to mark the element
in question with <code>class=&quot;fixheight&quot;</code> and then in JavaScript, search for all elements with
class <code>fixheight</code> and set their height to their parent&#39;s clientHeight. So far that&#39;s fixed
all the issues.</p>
</li>
<li><p>Consider using Canvas to draw your controllers</p>
<p>CSS sucks balls or rather I can never figure out how to get it to do what I want.
I literally spend 1-3 hours doing something I expect to take me 5 minutes like
trying to get some unicode bullet centered in a button.</p>
<p>So, I realized I could just make a canvas and hand draw the controls I want in it.
I did this for the DPad examples although I use a separate canvas for each. I could
instead use one large canvas and just draw all the buttons I want on it.
Touch/Click detection would also be easier and faster because looking up the
the position of an event relative to some element is slow in JavaScript since
you have to compute the position of the element by decending through all of its
parents.</p>
</li>
<li><p>What&#39;s with the weird <code>define()</code> stuff.</p>
<p>It&#39;s part of <a href="http://requirejs.org/">require.js</a>. See <a href="http://requirejs.org/docs/whyamd.html">Why AMD</a>?</p>
<p>The simple explaination is. There&#39;s a script tag (in HFTs case it&#39;s in the template) that looks like this</p>
<pre><code>&lt;script data-main=&quot;scripts/game.js&quot; src=&quot;/3rdparty/require.js&quot;&gt;&lt;/script&gt;
</code></pre><p>This loads <code>require.js</code> which then asynchronously loads <code>scripts/games.js</code>. It calls <code>requirejs</code> from
that file. <code>requirejs</code> returns an array of dependencies and a function. The system starts loading the
dependinces. Each of those has a <code>define</code> function which itself has an optional list of dependencies
and a function. The system continues to load dependencies until all of them are loaded. It will load
each file only once. When all of them are loaded it will call the functions that each of them returned
in the correct order and pass whatever those functions returned into the functions the depend on them.</p>
<p>In other words.</p>
<pre><code> // game.js
 requirejs([&#39;./somelib&#39;, &#39;./otherlib&#39;], function(SomeLib, OtherLib) {
    console.log(SomeLib.bar);
    console.log(SomeLib.foo);
 });

 // somelib.js
 define([&#39;./yetanotherlib&#39;], function(YetAnotherLib) {
    return {
       bar: YetAnotherLib.astrofy(&quot;abc&quot;);
    }
 });

 // otherlib.js
 define([&#39;./yetanotherlib&#39;], function(YetAnotherLib) {
    return {
       foo: YetAnotherLib.astrofy(&quot;123&quot;);
    }
 });

 // yetanotherlib.js
 define(function(YetAnotherLib) {
    return {
       astrofy: function(v) { return &quot;**&quot; + v + &quot;**&quot;; };
    }
 });
</code></pre><p>Would first load game.js and call <code>requirejs()</code> see it dependes on <code>./somelib</code> and <code>./otherlib</code> so it
would load <code>somelib.js</code> and <code>otherlib.js</code> and call <code>define()</code> in each. Each of those depend on
<code>./yetanotherlib</code> so it would load <code>yetanotherlib.js</code>. <code>yetanotherlib.js</code> has no dependencies.
Now it would call the function that was passed to <code>yetanotherlib.js:define()</code>. That funtion returns an
object with single property <code>astrofy</code>. The system then calls the functions that were passed to
<code>somelib.js:define</code> and <code>otherlib.js:define</code> passing in the object from <code>yetanotherlib</code>.
It finally calls the function that was passed to <code>game.js:requirejs</code></p>
</li>
</ul>
<ul>
<li><p>Disable caching in your browser</p>
<p>Right now the relayserver tells the browser not to cache anything. Whether the browser
pays attention to this is up to the browser.</p>
<p>You can also often turn off caching in the browser. In Chrome for example, open the
devtools. Click the gear icon near the top right of the tools. Check
&quot;Disable Cache (when Devtools is open)&quot;</p>
</li>
</ul>

      <hr/>
      <div>
        <div>Questions? <a href="http://stackoverflow.com/questions/tagged/happyfuntimes">Ask on stackoverflow</a>.</div>
        <div>Issue/Bug? <a href="http://github.com/greggman/happyfuntimes/issues">Create an issue on github</a>.</div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'happyfuntimes'; // required: replace example with your forum shortname
            var disqus_identifier = 'Tips';
            var disqus_title = 'Tips';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("happyfuntimes") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <div class="col-sm-3 col-sm-offset-1 lesson-sidebar">
        <ul>
  <li>Setup
    <ul>
      <li><a href="osx.html">OSX</a></li>
      <li><a href="windows.html">Windows</a></li>
      <li><a href="linux.html">Linux</a></li>
    </ul>
  </li>
  <li>Making Games
    <ul>
      <li><a href="makinggames.html">Making games in HTML5</a></li>
      <li><a href="unity">Making games in Unity3D</a></li>
      <li><a href="ideas.html">Ideas</a></li>
      <li><a href="tips.html">Tips</a></li>
      <li><a href="examples.html">Examples</a></li>
      <li><a href="api-versions.html">API Versions</a></li>
      <li><a href="commands.html">hft command</a></li>
    </ul>
  </li>
  <li>Special Stuff
    <ul>
      <li><a href="network.html">Museums & Installations</a></li>
      <li><a href="migration.html">Migrating from older APIs</a></li>
    </ul>
  </li>
  <li>Contributing
    <ul>
      <li><a href="contributing.html">Contributing</a></li>
      <li><a href="future.html">Future Features</a></li>
    </ul>
  </li>
</ul>

    </div>
  </div>
</div>
</body>
<script src="/docs/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/docs/3rdparty/prettify.js"></script>
<script src="/docs/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51764205-4', 'auto');
  ga('send', 'pageview');

</script>


</html>



