<!DOCTYPE html>
<!-- this file is auto-generated from docs/makinggames.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Gregg Tavares. nor the names of his
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="Making games" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />
<meta property="og:description" content="Making games with HappyFunTimes" />
<meta property="og:url" content="http://docs.happyfuntimes.net/docs/makinggames.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="docs.happyfuntimes.net" />
<meta name="twitter:title" content="Making games" />
<meta name="twitter:url" content="http://docs.happyfuntimes.net/docs/makinggames.html" />
<meta name="twitter:description" content="Making games with HappyFunTimes" />
<meta name="twitter:image:src" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />

<title>Making games</title>
<link href="/public/hft-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/docs/css/base.css" type="text/css" />
<link rel="stylesheet" href="/docs/css/lesson.css" type="text/css" />
</head>
<body>
<div class="header">
  <h1><a href="/docs">HappyFunTimes Docs</a></h1>
</div>


<div class="container">
  <div class="lesson-title">
    <h1>Making games</h1>
  </div>
  <div class="row">
    <div class="col-sm-8 lesson-main">
      <h3 id="table-of-contents">Table of Contents</h3>
<ul>
<li><strong><a #setting-up-for-development>Setting up for devlopment</a></strong></li>
<li><strong><a #running-games-during-development>Running Games During Development</a></strong></li>
<li><strong><a #writing-games>Writing Games</a></strong><ul>
<li><strong><a #making-the-controller>Making the controller (phone part)</a></strong></li>
<li><strong><a #requirejs>requirejs</a></strong></li>
<li><strong><a #controller-js>controller.js</a></strong></li>
<li><strong><a #dealing-with-different-phone-sizes>Dealing with different phone sizes</a></strong></li>
</ul>
</li>
<li><strong><a #making-a-game>Games in JavaScript</a></strong><ul>
<li><strong><a #game-js>game.js</a></strong></li>
<li><strong><a #handling-players>Handling Players</a></strong></li>
</ul>
</li>
<li><strong><a #packagejson>package.json</a></strong><ul>
<li><strong><a #required-fields>Required Fields</a></strong></li>
</ul>
</li>
<li><strong><a #files>Files</a></strong></li>
<li><strong><a href="commands.html">HFT Commands</a></strong></li>
<li><strong><a #other-languages>Other Languages</a></strong></li>
<li><strong><a href="ideas.html">Ideas</a></strong></li>
<li><strong><a #misc>Misc</a></strong></li>
<li><strong><a href="future.html">Future Features</a></strong></li>
</ul>
<h2 id="setting-up-for-development">Setting up for development</h2>
<p>I&#39;m sorry there&#39;s so many steps. It&#39;s not as hard as it looks. Trust me.</p>
<h3 id="tl-dr-version">TL;DR version</h3>
<ul>
<li>install happyfuntimes (<a http://superhappyfuntimes.net/install>http://superhappyfuntimes.net/install</a>) <a #happyfuntimes>(info)</a></li>
<li>install node.js (<a http://nodejs.org/download/>http://nodejs.org/download/</a>) <a #nodejs>(info)</a></li>
<li>if on windows install msysgit (<a http://msysgit.github.io/>http://msysgit.github.io/</a>) <a #msysgit>(info)</a></li>
<li>install bower <code>sudo npm install -g bower</code> (no sudo on windows) <a #bower>(info)</a></li>
<li>clone a game <a #clone>(info)</a></li>
<li>edit <code>package.json</code> inside the game you cloned, change <code>gameId</code> and <code>name</code> <a #packagejson>(info)</a></li>
<li>type <code>hft add</code> <a #hftadd>(info)</a></li>
</ul>
<h3 id="verbose-vesrion">Verbose vesrion</h3>
<ul>
<li><p><a id="happyfuntimes"/>Install HappyFunTimes (http://superhappyfuntimes.net/install)</p>
<p>On Windows you might run into security issues: <a href="windows.html">See here</a>.</p>
<p><strong>IMPORTANT</strong> You can <strong>NOT</strong> have 2 installations of happyFunTimes.</p>
<p>So, if you install above do NOT clone the happyfuntimes repo.</p>
<p>If you clone the repo do NOT install happyfuntimes with the installer.</p>
<p>Note: There is no reason to clone the repo AFAIK unless you want to
contribute to happyfuntimes itself. For making games installing
with the installer is fine.</p>
<p>If you accidentally install twice you&#39;ll need to delete the configuration
files because they&#39;ll be pointing to one installation.</p>
<pre><code>OSX: ~/Library/Application Support/HappyFunTimes
Windows: /Users/&lt;name&gt;/AppData/Local/HappyFunTimes
Linux: ~/.happyfuntimes
</code></pre><p>After that either run happyfuntimes you installed using the installer to make that
the configured version, or, type <code>node start.js --app-mode</code> from the
cloned folder if you&#39;re using a cloned repo.</p>
</li>
<li><p><a id="msysgit"/>If on Windows install msysgit (http://msysgit.github.io/)</p>
<p>when asked choose to <a ../images/msysgit-option-01.png>&quot;Use Git from the Windows Commmand Prompt&quot;</a>.</p>
</li>
<li><p>Open a shell/terminal/command prompt</p>
<p>on Windows open a <a ../images/node-js-command-prompt.png>node.js command prompt</a>.</p>
</li>
<li><p><a id="bower"/>Install Bower.</p>
<p>Bower is a program that downloads JavaScript libraries. For example
if a controller or game needs jquery or three.js bower handles that.</p>
<p>Type <code>npm install -g bower</code>.</p>
<p>Don&#39;t forget that <code>-g</code>. Also you might need <code>sudo</code> on OSX or Linux</p>
</li>
<li><p><a id="clone"/>Download or Clone a game. <a href="examples.html">Pick one from the list</a></p>
<p>for example, assuming you have git installed</p>
<pre><code>git clone https://github.com/greggman/hft-simple.git
</code></pre><p>Or you can download a zip. For example if you go to
<a http://github.com/greggman/hft-simple>http://github.com/greggman/hft-simple</a> you should see a &quot;Download ZIP&quot;
button on the right side.</p>
</li>
<li><p>If this is <strong>not a unity</strong> sample then cd into the root of the repo you cloned or you unzipped.</p>
<p>(eg. <code>cd hft-simple</code>)</p>
</li>
<li><p>type <code>bower install</code> which will install needed javascript modules locally</p>
<p>This step is only needed for some games. If there is no <code>bower.json</code>
in the folder you can skip this step.</p>
</li>
<li><p><a id="packagejson"/>edit the <code>package.json</code> file and change the <code>gameId</code> and <code>name</code> to something unique.</p>
<p>Note: If you are collaborating on a game don&#39;t change this stuff. Only change it
if you&#39;re making a new game based off of an existing game.</p>
</li>
<li><p><a id="hftadd"/>add the game to happyfuntimes</p>
<p>type <code>hft add</code></p>
</li>
<li><p>Run happyfuntimes</p>
<p>You can run it by clicking its icon from when you installed it in step 1
or you can run it by typing <code>hft start --app-mode</code></p>
</li>
</ul>
<h2 id="running-games-during-development">Running Games during development</h2>
<p>For HTML based games you can always just run them from happyfuntimes. Launch it,
pick your game. For Unity3D see <a href="unitydocs.html">the unity docs</a>.</p>
<p>Alternatively run happyfuntimes with one of the methods above and in your
browser window and go to <code>http://localhost:18679/games.html</code> and choose a game.
In other window go to <code>http://localhost:18679</code>.  Note use a window, not a tab
so you can see both at the same time.</p>
<p>You can simulate other machines joining the game by opening more windows
or tabs in your browser.</p>
<p><img src="../images/windows-for-controllers.jpg" width="840" height="525" /></p>
<p>Inside happyfuntimes, games with <code>(*)</code> by their name are games in development. In other words
they are games you used <code>hft add</code> to add to happyfuntimes. Games without the <code>(*)</code> are games
that were installed from inside happyfuntimes by going to <a http://superhappyfuntimes.net>superhappyfuntimes.net</a>
and installing them.</p>
<p>If you have other computers or smartphones <strong>on the same network</strong> go to <code>http://happyfuntimes.net</code>
and they <em>should</em> connect to your game. Alternatively you can lookup the ip address of
the machine running the game (see <code>ifconfig</code> on OSX/Linux, the Network Preferneces on OSX,
or <code>ipconfig</code> on Windows) then go to <code>http://ipaddress:18679</code> from those machines.
For example on my home network it was <code>http://192.168.2.9:18679</code>. For installations, museums,
and places with no internet consider <a href="network.html">setting up for instant connect</a>.</p>
<h2 id="writing-games">Writing Games</h2>
<p>If you&#39;re doing it in JavaScript use any game framework you want, copy one of the examples,
or write from scratch but a few <em>rules</em>. If you&#39;re doing it in Unity3D or any other language
you should still follow the info below.</p>
<p>The easist way to get started is to clone one of the existing games. Pick from</p>
<ul>
<li><p><a http://github.com/greggman/hft-jumpjump>JumpJump</a> A simple platform game written in JavaScript using WebGL / TDL</p>
</li>
<li><p><a http://github.com/greggman/hft-boomboom>BoomBoom</a> A bomb placing game written in JavaScript using WebGL / TDL</p>
</li>
<li><p><a http://github.com/greggman/hft-powpow>PowPow</a> A space wars game written in JavaScript using WebGL / TDL</p>
</li>
<li><p><a http://github.com/greggman/hft-simple>Simple</a> The simplest example. Just moves dots around.</p>
</li>
<li><p><a http://github.com/greggman/hft-deviceorientation>Deviceorientation</a> A device orientation sample written in JavaScript using WebGL / Three.js</p>
</li>
<li><p><a http://github.com/greggman/hft-unitycharacterexample>Unitychararacterexample</a> A Unity3D example that spawns characters written in UnityScript.</p>
</li>
<li><p><a http://github.com/greggman/hft-simple>Unitysimple</a> A Unity3D example that just positions a sphere for each player written in C#.</p>
</li>
</ul>
<p>For example to clone JumpJump you&#39;d type</p>
<pre><code>git clone https://github.com/greggman/hft-jumpjump.git
</code></pre><p>This should clone game into the folder <code>hft-jumpjump</code>.</p>
<p>Or alternatively click one of the links above and click &quot;Download ZIP&quot; on the right side of the page and
then unzip it.</p>
<p>After cloning you must edit <code>package.json</code>. At a minimum change the <code>gameId</code> to something original like</p>
<pre><code>&quot;gameId&quot;: &quot;MyAwesomePartyGame&quot;,
</code></pre><p>Choose something original unlikely to clash with other games since ids must be unique.
The id may only use A-Z 0-9 _ and -. No spaces. No other punctuation or non alpha numerica characters.</p>
<p>You&#39;ll probably also want to edit the <code>name</code> and <code>description</code>.</p>
<p>Finally cd to the folder you cloned to and add the game. In our example</p>
<pre><code>cd hft-jumpjump
hft add
</code></pre><p>It should say game added. Now run HappyFunTimes. You should see your game added.</p>
<h3 id="making-the-controller">Making the Controller</h3>
<p>Controllers are the part that runs on the phone. This part MUST be written
in HTML/JavaScript as that&#39;s kind of the point. It needs to run on the phone
with out requiring the user to install anything.</p>
<p>These files are <strong>REQUIRED</strong> for all happyfuntimes games</p>
<pre><code>controller.html           // The HTML for your controller
css/controller.css        // The CSS for your controller
scripts/controller.js     // The main script for your controller
package.json              // The data about your game.
screenshot.png            // At least one screenshot 640x480 is good
icon.png                  // An icon, 128x128
</code></pre><p><code>contoller.html</code> is inserted into a template at runtime. The template provides
common UI features like the settings icon in the top right corner, name input,
and support for switching games.</p>
<p>The CommonUI currently consists of the gear menu top right of the display as well
has handling of name editing, disconnecting, and auto switching to the new games.</p>
<h3 id="requirejs">requirejs</h3>
<p>Currently most JavaScript in HappyFunTimes use <a http://requirejs.org>requirejs</a> to load and
reference files. Requirejs is awesome because it provides both dependency injection
and a module system.</p>
<p>If you&#39;d prefer to use a more traditional <code>&lt;script&gt;</code> tags <a http://github.com/greggman/hft-simple-script/>see example</a>.</p>
<h3 id="controller-js">controller.js</h3>
<p>The minimum contents of a <code>controller.js</code> is</p>
<pre><code>&quot;use strict&quot;;

// Start the main app logic.
requirejs(
  [ &#39;hft/gameclient&#39;,
    &#39;hft/commonui&#39;,
    &#39;hft/misc/misc&#39;,
    &#39;hft/misc/mobilehacks&#39;,
  ], function(
    GameClient,
    CommonUI,
    Misc,
    MobileHacks) {
  var g_client;

  var globals = {
    debug: false,
  };
  Misc.applyUrlSettings(globals);
  MobileHacks.fixHeightHack();

  g_client = new GameClient();

  CommonUI.setupStandardControllerUI(g_client, globals);

  // Insert your controller specific code here.
});
</code></pre><p>Currently the rest is up to you. Add HTML elements as you see fit. Read HTML events and
call <code>g_client.sendCmd</code> to pass whatever events you want back to the game. Add listeners
with <code>g_client.addEventListener</code> for any events you want to send from the game back to the
controller.</p>
<pre><code>g_client.sendCmd(&#39;foo&#39;, { someNumber: 123, someString, &quot;abc&quot;, someBool: true});
</code></pre><p>Will emit a message on the corresponding <code>NetPlayer</code> in the game.</p>
<pre><code>g_server.addEventListener(&#39;foo&#39;, handleFoo);

function handleFoo(data) {
   console.log(JSON.stringify(data));
};
</code></pre><p>Prints the following in the JavaScript console.</p>
<pre><code>{&quot;someNumber&quot;:123,&quot;someString&quot;:&quot;abc&quot;,&quot;someBool&quot;:true}
</code></pre><p>Similary any message sent by the game</p>
<pre><code>someNetPlayer.sendCmd(&#39;bar&#39;, { someColor: &quot;red&quot;});
</code></pre><p>Will emit an event back in the controller.</p>
<pre><code>g_client.addEventListener(&#39;bar&#39;, handleBar);

function handleBar(data) {
  document.body.style.backgroundColor = data.someColor;
}
</code></pre><h3 id="dealing-with-different-phone-sizes">Dealing with different phone sizes</h3>
<p>The hardest part of creating a controller (I have ideas for a solution) is handling
CSS and placement across browser versions
and devices. For example iOS6.1, iOS7.0 and iOS7.1 all provide a different size usable area
in Safari. On top fo that 3.5inch iPhones vs 4inch iPhones and newer provide a different usable area.
And finally add Android on top of that and possibly iPad and other tablets and you can see
this is the hardest part.</p>
<p>Be sure to test before you demo! If you happen to be on a Mac the iOS Simulator that
comes with XCode is your friend.</p>
<h2 id="games-in-javascript">Games in JavaScript</h2>
<p>For a game in JavaScript, on top of the controller files there are 3 main files <strong>REQUIRED</strong></p>
<pre><code>game.html           // The HTML for your game
css/game.css        // The CSS for your game
scripts/game.js     // The main script for your game
</code></pre><p>game.html is loaded into a template at runtime. The template provides the following features</p>
<ul>
<li><p>Handles displaying a disconnected message if the game gets disconnected from happyfuntimes</p>
</li>
<li><p>Will display an FPS meter if <code>showFPS</code> is set to <code>true</code>.</p>
</li>
<li><p>Provides a requestAnimationFrame based mainloop callback.</p>
</li>
<li><p>Provides an <code>elapsedTime</code> and <code>frameCount</code>.</p>
<p>The elapsed time is in seconds since the last frame and is limited to being
no longer than 1/20th of a second (otherwise if you pause the game for a few
seconds you&#39;d get a giant elapsedTime and your game would probably break)</p>
</li>
<li><p>Will add a few HTML overlays for debugging if <code>debug</code> is set to <code>true</code></p>
<ul>
<li><p>You can display per frame info with</p>
<pre><code>GameSupport.setStatus(msg);
</code></pre><p>For example:</p>
<pre><code>var globals = {
  debug: true,
}

GameSupport.init(server, globals);

var mainloop = function() {
  var msgs = [];
  msgs.push(&quot;elapsedTime: &quot; + globals.elapsedtIme);
  msgs.push(&quot;frames: + globals.frameCount);
  GameSupport.setStatus(msgs.join(&quot;\n&quot;));
};
</code></pre></li>
<li><p>You can display to an onscreen console with</p>
<pre><code>GameSupport.log(&quot;hello&quot;);
GameSupport.error(&quot;oops&quot;);
</code></pre><p>These are not that useful given debugging tools in the browser but they can be
useful on devices for which there is no easily accessable console. Note that
you can get a remote debug from both <a https://developer.apple.com/library/safari/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/Safari_Developer_Guide.pdf>iOS devices and the iOS simulator</a>
and similarly in <a https://developer.chrome.com/devtools/docs/remote-debugging>Chrome on Android</a>.</p>
<p>In both cases you connect the phone by USB cable. Run the webpage, launch your browser, pick
the correct options and have access to the full suite of developer tools remotely. See links
above for details.</p>
</li>
</ul>
</li>
<li><p>Will optionally pause when the game does not have the focus.</p>
<p>I work on a laptop, often without power. Games, running at 60fps eat up battery
like crazy. Normally on modern OSes with fancy compositied desktops, bringing
your editor to the front is not enough to tell an app to stop rendering.</p>
<p>So, I made it so if the page does not have the focus then stop rendering. This means
when I switch back to my editor the game pauses and my battery stops getting eaten.</p>
<p>Things to note though. If you have the Chome developer tools open and they have the
focus the game will stop. That can be confusing. Simiarly, if you are debugging
controllers by opening other browser windows/tabs the game will stop when you try
to use the controller.</p>
<p>My workflow is I try to make the game playable without controllers. Usually that&#39;s
by passing in <code>haveServer: false</code>. If I see that my init code will spawn 2 players
with <code>LocalNetPlayer</code> for their <code>NetPlayer</code>. I&#39;ll then setup some keyboard or mouse
input to generate events on the <code>LocalNetPlayer</code> which the player code will
see as inputs from a controller.</p>
<p>This means I can play the game just by going to the game&#39;s URL like
<code>http://localhost:18679/games/jumpjump/game.html?settings={haveServer:false}</code>.</p>
<p>When I want to test with real controllers I remove the <code>haveServer:false</code>. That
way the game continues to run even when a controller window has the focus.</p>
</li>
</ul>
<h3 id="game-js">game.js</h3>
<pre><code>The minimum contents of a `game.js` is

    &quot;use strict&quot;;

    requirejs(
      [ &#39;hft/scripts/gameserver&#39;,
        &#39;hft/scripts/gamesupport&#39;,
        &#39;hft/scripts/misc/misc&#39;,
      ], function(
        GameServer,
        GameSupport,
        Misc) {

      // You can set these from the URL with
      // http://localhost:18679/games/&lt;gameid&gt;/gameview.html?settings={name:value,name:value}
      var globals = {
        haveServer: true,
        debug: false,
      };
      Misc.applyUrlSettings(globals);

      var server;
      if (globals.haveServer) {
        server = new GameServer();

        server.addEventListener(&#39;playerconnect&#39;, someFunctionThatCreatesAPlayer);
      }

      GameSupport.init(server, globals);

      // Your init code goes here.

      ...

      var mainloop = function() {

         // your game&#39;s main loop code goes here.
      };

      GameSupport.run(globals, mainloop);
    });
</code></pre><ul>
<li>GameSupport will set <code>globals.elapsedTime</code> to the time in seconds that have elapsed since the last
call to your mainloop. <code>globals.gameTime</code> is the time since the game started.
<code>global.frameCount</code> is the number of times your main loop has been called.</li>
</ul>
<h3 id="handling-players">Handling Players</h3>
<p>Note in the code above we register a function <code>someFunctionThatCreatesAPlayer</code> to be called
anytime a player connects. That function get&#39;s passed a <code>NetPlayer</code> object which represents
the connction between your game and a player&#39;s phone.</p>
<p>Simple handling of players might be something like</p>
<pre><code>var players = [];  // Array of all players

// Make a &quot;class&quot; Player.
function Player(netPlayer, name) {
  this.netPlayer = netPlayer;
  this.name = name;

  // at a minimum handle disconnecting
  netPlayer.addEventListener(&#39;disconnect&#39;, Player.prototype.handleDisconnect.bind(this));
}

Player.prototype.handleDisconnect = function() {
  var index = players.indexOf(this);
  if (index &gt;= 0) {
    players.splice(index, 1);  // removes this player from the list of players
  }
};


function someFunctionThatCreatesAPlayeer(netPlayer, name) {
   // create a new player and add it to our array of players.
   players.push(new Player(netPlayer, name));
}
</code></pre><p>After that it&#39;s up to you. Add other event handlers for messages from the phone</p>
<pre><code>...
    netPlayer.addEventListener(&#39;move&#39;, Player.prototype.handleMove.bind(this));
...

Player.prototype.handleMove = function(data) {
  this.position.x += data.x;
  this.position.y += data.y;
};
</code></pre><p>That code assumes there&#39;s corresponding code in <code>controller.js</code> something like</p>
<pre><code>g_client.sendCmd(&#39;move&#39;, {x: someDeltaX, y: someDeltaY});
</code></pre><p>Similarly send messages to the phone with</p>
<pre><code>   this.netPlayer.sendCmd(&#39;boom&#39;, {powerLevel: somePowerLevel});
</code></pre><p>And back in <code>controller.js</code></p>
<pre><code>g_client.addEventListener(&#39;boom&#39;, handleBoom);

funciton handleBoom(data) {
   // do something with data.powerLevel
}
</code></pre><h3 id="handling-names">handling names</h3>
<p>The CommonUI allows the player to choose name. That name is sent when the player connects
but the player can set their name anytime by choosing the wrench menu and picking &quot;Set Name&quot;.</p>
<p>Two messages are sent, <code>busy</code> and <code>setName</code>.</p>
<p><code>busy</code> indicates the player is on system menu which means they are not playing at the moment.
It will be passed an object with <code>busy:true</code> or <code>busy:false</code> when they enter and exit the system
menus.</p>
<p>Its up to you to decide if you care. For example maybe you&#39;d like to remove them from the game when you
receive the message something like</p>
<pre><code>    netPlayer.addEventListener(&#39;busy&#39;, Player.prototype.handleBusyMsg.bind(this));

Player.prototype.handleBusyMsg = function(data) {
   if (data.busy) {
      // the player is on the system menu
      player.hidden = true;
      player.collisionsOff = true;
   } else {
      player.hidden = false;
      player.collisionsOn = true;
   }
};
</code></pre><p><code>setName</code> indicates the player has chosen a new name. If the name is blank you can send a name
back to the controller.</p>
<pre><code>    netPlayer.addEventListenter(&#39;setName&#39;, Player.prototype.handleSetNameMsg.bind(this));

Player.prototype.handleSetNameMsg = function(data) {
  player.name = data.name || &quot;The Unknown Solider&quot;;

  // If we picked name send it back to the phone
  if (!data.name) {
    this.netPlayer.sendCmd(&#39;setName&#39;, {name: player.name});
  }
};
</code></pre><h2 id="package-json">package.json</h2>
<p>This file defines some data about your game. It is a JSON file and JSON has a very strict format.</p>
<ul>
<li><p>No trailing commmas.</p>
<p>Good</p>
<p>   {</p>
<pre><code> &quot;a&quot;: 123,
 &quot;b&quot;: 456
</code></pre><p>   }</p>
<p>Bad</p>
<p>   {</p>
<pre><code> &quot;a&quot;: 123,
 &quot;b&quot;: 456,
</code></pre><p>   }</p>
</li>
<li><p>No comments! JSON is NOT JavaScript.</p>
</li>
<li><p>All Strings and identifiers must be quoted. The only things not quoted are numbers and <code>true</code>, <code>false</code>,
and <code>null</code>.</p>
</li>
<li><p>It&#39;s case sensitive. <code>&quot;HappyFunTimes&quot;</code> is NOT the same as <code>&quot;happyFunTimes&quot;</code></p>
</li>
</ul>
<h3 id="required-fields">Required fields</h3>
<p>A standard package.json looks like this</p>
<pre><code>{
  &quot;name&quot;: &quot;JumpJump&quot;,
  &quot;description&quot;: &quot;A game with Jumping&quot;,
  &quot;version&quot;: &quot;0.0.2&quot;,
  &quot;private&quot;: false,
  &quot;dependencies&quot;: {
  },
  &quot;happyFunTimes&quot;: {
    &quot;gameId&quot;: &quot;jumpjump&quot;,
    &quot;category&quot;: &quot;game&quot;,
    &quot;apiVersion&quot;: &quot;1.3.0&quot;,
    &quot;gameType&quot;: &quot;html&quot;,
    &quot;minPlayers&quot;: 1
  }
}
</code></pre><ul>
<li><p><code>name</code></p>
<p>A name for your game. Used on the main screen of HappyFunTimes and SuperHappyFunTimes</p>
</li>
<li><p><code>description</code></p>
<p>A description. Used on superhappyfuntimes. No HTML allowed currently.</p>
</li>
<li><p><code>version</code></p>
<p>Used on superhappyfuntimes so users can know if there is a newer version for them to download.</p>
</li>
<li><p><code>happyFunTimes.gameId</code></p>
<p>This is the id for your game. Every game on superhappyfuntimes must have a unique id.
only A-Z, 0-9, _, - are allowed and no more than 60 charactera.</p>
</li>
<li><p><code>happyFunTimes.apiVersion</code></p>
<p>This is the happyFunTimes API version needed by this game. If this number is higher
than the version of happyFunTimes the user has installed they will be asked to upgrade.
It is also used by happyFunTimes to provide the correct API for the game.</p>
</li>
<li><p><code>happyFunTimes.gameType</code></p>
<p>This is used by happyFunTimes to figure out how to deal with the game. For example
how to launch the game and how to publish it.  Currently only
2 values are valid</p>
<ul>
<li><code>html</code></li>
<li><code>Unity3D</code></li>
</ul>
</li>
<li><p><code>happyFunTimes.minPlayers</code></p>
<p>How many players are required to play this game. For example, jumpjump you can play with
one player. It&#39;s probably not any fun but you can player. boomboom on the otherhand
requires 2 players. It will not start until there are 2 players.</p>
<p>This is only used on the superhappyfuntimes to set expectations. If you have a game that requires
10 players please consider marking it here.</p>
</li>
<li><p><code>happyFunTimes.category</code></p>
<p>This is also only used on superhappyfuntimes to set expections and hopefully to, um, categories
things. Current values</p>
<ul>
<li><code>game</code> A game</li>
<li><code>example</code> Not a game, not really meant to be played, just an example</li>
<li><code>demo</code> Not a game, something else like an exhibit, possibly not playable without more stuff</li>
</ul>
</li>
<li><p><code>happyFunTimes.useScriptTag</code></p>
<p>True indicates you don&#39;t want to use requirejs instead you want to use <code>&lt;script&gt;</code> tags. Your <code>apiVerison</code>
must be <code>1.3.0</code> or higher</p>
<p>I really like <a http://requirejs.org>require.js</a> style of modules. It encourages
dependency injection, it also suppots module independence. But, for many it&#39;s non
standard and they&#39;re not used to it.</p>
<p>So, if you want to just use standard script tags make sure your <code>package.json</code> has its
<code>happyFunTimes.apiVersion</code> set to <code>1.3.0</code> or higher and add the flag <code>happyFunTimes.useScriptTag</code> set
to <code>true</code>. Example:</p>
<pre><code>{
  ...
  &quot;happyFunTimes&quot;: {
    ...
    &quot;apiVersion&quot;: &quot;1.3.0&quot;,
    &quot;useScriptTag&quot;: true,
    ...
  }
}
</code></pre><p>The <code>&lt;script&gt;</code> tags for HappyFunTimes are automatically
added for you and so is the script tag that includes <code>scripts/game.js</code> for your game and
<code>scripts/controller.js</code> for your controller. If you need any other scripts
(like three.js or pixi.js or jquery) add script tags to
either <code>game.html</code> or <code>controller.html</code>.  The HappyFunTimes libraries will be inserted before
those tags. The <code>game.js</code> or <code>controller.js</code> will be inserted after.</p>
<p>See example: <a http://github.com/hft-simple-script/>http://github.com/hft-simple-script/</a></p>
</li>
</ul>
<h2 id="files">Files</h2>
<h3 id="favicon">Favicon</h3>
<p>If you have a <code>favicon.png/jpg/gif</code> in your game&#39;s root folder it will be used for your favicon.
If it does not exist your <code>icon.png/jpg/gif</code> will be used.</p>
<h2 id="other-languages">Other Languages</h2>
<p>Coming Soon. Techinally games can be written in any language although currently only library for JavaScript and
Unity3D exist (working on more)</p>

      <hr/>
      <div>
        <div>Questions? <a href="http://stackoverflow.com/questions/tagged/happyfuntimes">Ask on stackoverflow</a>.</div>
        <div>Issue/Bug? <a href="http://github.com/greggman/happyfuntimes/issues">Create an issue on github</a>.</div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'happyfuntimes'; // required: replace example with your forum shortname
            var disqus_identifier = 'Making games';
            var disqus_title = 'Making games';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("happyfuntimes") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <div class="col-sm-3 col-sm-offset-1 lesson-sidebar">
        <ul>
  <li>Setup
    <ul>
      <li><a href="osx.html">OSX</a></li>
      <li><a href="windows.html">Windows</a></li>
      <li><a href="linux.html">Linux</a></li>
    </ul>
  </li>
  <li>Making Games
    <ul>
      <li><a href="makinggames.html">Making games in HTML5</a></li>
      <li><a href="unity">Making games in Unity3D</a></li>
      <li><a href="ideas.html">Ideas</a></li>
      <li><a href="tips.html">Tips</a></li>
      <li><a href="examples.html">Examples</a></li>
      <li><a href="api-versions.html">API Versions</a></li>
      <li><a href="commands.html">hft command</a></li>
    </ul>
  </li>
  <li>Special Stuff
    <ul>
      <li><a href="network.html">Museums & Installations</a></li>
      <li><a href="migration.html">Migrating from older APIs</a></li>
    </ul>
  </li>
  <li>Contributing
    <ul>
      <li><a href="contributing.html">Contributing</a></li>
      <li><a href="future.html">Future Features</a></li>
    </ul>
  </li>
</ul>

    </div>
  </div>
</div>
</body>
<script src="/docs/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/docs/3rdparty/prettify.js"></script>
<script src="/docs/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51764205-4', 'auto');
  ga('send', 'pageview');

</script>


</html>



