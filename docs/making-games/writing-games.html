<!DOCTYPE html>
<!-- this file is auto-generated from docs/making-games/writing-games.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Gregg Tavares. nor the names of his
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="Writing Games" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />
<meta property="og:description" content="Making Games with HappyFunTimes" />
<meta property="og:url" content="http://docs.happyfuntimes.net/docs/making-games/writing-games.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="docs.happyfuntimes.net" />
<meta name="twitter:title" content="Writing Games" />
<meta name="twitter:url" content="http://docs.happyfuntimes.net/docs/making-games/writing-games.html" />
<meta name="twitter:description" content="Making Games with HappyFunTimes" />
<meta name="twitter:image:src" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />

<title>Writing Games</title>

<link href="/public/hft-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/docs/assets/css/styles.css" type="text/css" />
</head>
<body>
<div class="header">
  <h1><a href="/docs/making-games">HappyFunTimes Docs</a></h1>
</div>


<div class="container">
  <div class="docs-title">
    <h1>Writing Games</h1>
  </div>
  <div class="row">
    <div class="col-sm-8 docs-content">
      <p>If you&#39;re doing it in JavaScript use any game framework you want, copy one of the examples,
or write from scratch but a few <em>rules</em>. If you&#39;re doing it in Unity3D or any other language
you should still follow the info below.</p>
<p>The easist way to get started is to clone one of the existing games.</p>
<h3 id="contents">Contents</h3>
<ul>
<li><a href="#available-example-games">Available example games</a></li>
<li><a href="#using-an-example-game">Using an example Game</a></li>
<li><a href="#the-game">The Game</a></li>
<li><a href="#the-controller">The Controller</a><ul>
<li><a href="#dealing-with-different-device-sizes">Dealing with different device sizes</a></li>
</ul>
</li>
<li><a href="#player-handling">Player Handling</a><ul>
<li><a href="#handling-player-names">Handling Player Names</a></li>
</ul>
</li>
<li><a href="#communication-between-game-and-controllers">Communication between Game and Controllers</a><ul>
<li><a href="#send-commands-from-the-game-to-controllers">From Game to Controllers</a></li>
<li><a href="#send-commands-from-the-controller-to-the-game">From Controllers to the Game</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="available-example-games">Available example Games</h2>
<ul>
<li><p><a href="http://github.com/greggman/hft-jumpjump">JumpJump</a>
A simple platform game written in JavaScript using WebGL / TDL</p>
</li>
<li><p><a href="http://github.com/greggman/hft-boomboom">BoomBoom</a>
A bomb placing game written in JavaScript using WebGL / TDL</p>
</li>
<li><p><a href="http://github.com/greggman/hft-powpow">PowPow</a>
A space wars game written in JavaScript using WebGL / TDL</p>
</li>
<li><p><a href="http://github.com/greggman/hft-simple">Simple</a>
The simplest example using hft-sample-ui. Just moves dots around.</p>
</li>
<li><p><a href="http://github.com/greggman/hft-clean">Clean</a>
The simplest example with no other libraries. Just moves dots around.</p>
</li>
</ul>
<h2 id="using-an-example-game">Using an example Game</h2>
<p>For example to clone JumpJump you&#39;d type</p>
<pre><code>git clone https://github.com/greggman/hft-jumpjump.git
</code></pre><p>This should clone game into the folder <code>hft-jumpjump</code>.</p>
<p>Or alternatively click one of the links above and click &quot;Download ZIP&quot; on the right side of the page and
then unzip it.</p>
<p>Make sure you have <a href="http://nodejs.org">node.js installed</a>. Then...</p>
<pre><code>cd hft-jumpjump
npm install
npm start
</code></pre><hr>
<h2 id="the-controller">The Controller</h2>
<p>Controllers are the component that runs on the mobile devices. This part must be
written in HTML/JavaScript as that&#39;s kind of the point. It needs to run on the
device without requiring the user to install anything.</p>
<p><code>contoller.html</code> is served to the phone. You supply it and any libraries you
want to use with it. Most of the samples use the <a href="https://github.com/greggman/hft-sample-ui"><code>hft-sample-ui</code></a>
library which provides common UI features like the settings icon in the top right corner, name input, cross
platform orientation support and a few other things.</p>
<p>The only &quot;required&quot; part of a controller is that you include happyfuntimes in some
method or another. You could use</p>
<pre><code>&lt;script src=&quot;../node_modules/happyfuntimes/dist/hft.js&quot;&gt;
</code></pre><p>In which case the happyfuntimes API will appear as a global <code>hft</code>.</p>
<p>Or other methods like <a href="https://webpack.github.io">webpack</a> or <a href="http://requirejs.org/">require.js</a>
etc. Most of the samples use require.js.</p>
<pre><code>requirejs([
    &#39;../node_modules/happyfuntimes/dist/hft&#39;,
  ], function(hft) {

  ...

});
</code></pre><p>However you get a reference to happyfuntimes you need to create an instance
of <code>GameClient</code></p>
<pre><code>const GameClient = hft.GameClient;
const g_client = new GameClient();
</code></pre><h3 id="send-commands-from-the-controller-to-the-game">Send Commands from the Controller to the Game</h3>
<p>Each time the player interacts with the controller, the controller may send the input to
the game. This can be touch operations, the use of a gamepad, button clicks or text
input.</p>
<p>In your script you can send a command by using the following code:</p>
<pre><code>g_client.sendCmd(&#39;foo&#39;, { someNumber: 123, someString, &quot;abc&quot;, someBool: true});
</code></pre><p>Then in in the game you would create an event listener that listens for the command:</p>
<pre><code>g_server.on(&#39;foo&#39;, handleFoo);

function handleFoo(data) {
   console.log(JSON.stringify(data));
};
</code></pre><p>This example would print the following to the browser console of the game:</p>
<pre><code>{&quot;someNumber&quot;:123,&quot;someString&quot;:&quot;abc&quot;,&quot;someBool&quot;:true}
</code></pre><p>It&#39;s up to you to decide what commands to send to the game from your controller. The most
common would be to send commands related to player input like touching or releasing a button,
entering a name, orienting their phone, whatever messages you want to send.</p>
<hr>
<h2 id="the-game">The Game</h2>
<p>The game component is what is displayed on the big screen that is visible to all players
at the same time. By default all the HTML5 games have the game in <code>game.html</code>. <code>game.html</code>
is just a regular HTML5 file and it&#39;s up to you to supply it with scripts and libraries
and whatever else you need to create your game. At a minimum you need to include
happyfuntimes. You can do this with a script tag if that&#39;s what you&#39;re used to</p>
<pre><code>&lt;script src=&quot;../node_modules/happyfuntimes/dist/hft.js&quot;&gt;
</code></pre><p>Of course because we&#39;re running in Electron you can also use require as in</p>
<pre><code>const hft = require(&#39;happyfuntimes&#39;);
</code></pre><p>Or many of the samples use <a href="http://requirejs.org/"><code>require.js</code></a> as it can make it
easier to share code with the controllers.</p>
<pre><code>const requirejs = require(&#39;requirejs&#39;);
requirejs.config({
  nodeRequire: require,
  baseUrl: __dirname,
});

requirejs([
    &#39;happyfuntimes&#39;,
  ], function(hft) {

  ...

});
</code></pre><p>However you get a reference to happyfuntimes you need to create an instance
of <code>GameServer</code> and then listen for players to connect.</p>
<pre><code>const server = new hft.GameServer();

server.on(&#39;playerconnect&#39;, someFunctionThatCreatesAPlayer);
</code></pre><hr>
<h3 id="handling-players">Handling Players</h3>
<p>From the code above the line <code>server.addEventListener(&#39;playerconnect&#39;, someFunctionThatCreatesAPlayer);</code>
specifies taht <code>someFunctionTheCreatesAPlayer</code> will be called any time a new player connects to the game.
It get&#39;s passed a <code>NetPlayer</code> object which represents the connection between your game and a player&#39;s phone.</p>
<p>Simple handling of players might look like this:</p>
<pre><code>var players = [];  // Array of all players

// Make a &quot;class&quot; Player.
class Player {
  constructor(netPlayer) {
    this.netPlayer = netPlayer;

    // at a minimum handle disconnecting
    netPlayer.on(&#39;disconnect&#39;, this.handleDisconnect.bind(this));
  }
  handleDisconnect() {
    var index = players.indexOf(this);
    if (index &gt;= 0) {
      players.splice(index, 1);  // removes this player from the list of players
    }
  };
}

function someFunctionThatCreatesAPlayeer(netPlayer, name) {
   // create a new player and add it to our array of players.
   players.push(new Player(netPlayer, name));
}
</code></pre><p>As you can see we create a <code>Player</code> class that is used to store all data and functions
for a connected player.</p>
<h3 id="send-commands-from-the-game-to-controllers">Send Commands from the Game to Controllers</h3>
<p>In your game code use the <code>NetPlayer</code> for a particular player. Using the Player class from above
we might do something like</p>
<pre><code>class Player {

  ...

  someFunction() {
     this.netPlayer.sendCmd(&#39;bar&#39;, { someColor: &quot;red&quot;});
  }

  ...
</code></pre><p>Then in the controller you&#39;d create an event listener that listens to the command:</p>
<pre><code>g_client.on(&#39;bar&#39;, handleBar);

function handleBar(data) {
  document.body.style.backgroundColor = data.someColor;
}
</code></pre><p><code>data</code> will contain whatever is sent from <code>sendCmd</code>, in this example an object with the
property <code>someColor</code>.</p>
<p>It&#39;s up to you to decide what messages to send from the game to the controller. Examples include
telling the controller to display a message like &quot;You Win&quot; or &quot;You Died&quot;. Telling the phone to
switch modes like &quot;Enter next move&quot; or &quot;Select location on map&quot;. Telling the phone to change
color or which avatar to display. Telling the phone to play a sound, etc...</p>
<hr>
<p>Next step: <a href="tips.html">Tips for writing Games</a></p>

      <div class="docs-footer">
        <div>Questions? <a href="http://stackoverflow.com/questions/tagged/happyfuntimes">Ask on stackoverflow</a>.</div>
        <div>Issue/Bug? <a href="http://github.com/greggman/happyfuntimes/issues">Create an issue on github</a>.</div>
        <div class="docs-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'happyfuntimes'; // required: replace example with your forum shortname
            var disqus_identifier = 'Writing Games';
            var disqus_title = 'Writing Games';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
              if (window.location.hostname.indexOf("happyfuntimes") < 0) {
                return;
              }
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
      </div>
    </div>
    <div class="col-sm-3 col-sm-offset-1 docs-sidebar">
        <ul class="toc">
    <li><a href="../introduction.html">Introduction</a></li>
    <li>
        <b>Setup</b>
        <ul>
            <li><a href="../setup/macos.html">OSX</a></li>
            <li><a href="../setup/windows.html">Windows</a></li>
            <li><a href="../setup/linux.html">Linux</a></li>
        </ul>
    </li>
    <li>
        <b>Making Games</b>
        <ul>
            <li><a href="index.html">Making games in HTML5</a></li>
            <li><a href="../unity">Making games in Unity3D</a></li>
            <li><a href="tips.html">Tips</a></li>
            <li><a href="../commands.html">hft command</a></li>
        </ul>
    </li>
    <li>
        <b>Ideas and Examples</b>
        <ul>
            <li><a href="../ideas.html">Ideas</a></li>
            <li><a href="../examples.html">Examples</a></li>
        </ul>
    </li>
    <li>
        <b>API</b>
        <ul>
            <li><a href="../api-versions.html">API Versions</a></li>
            <li><a href="../migration.html">Migrating from older APIs</a></li>
        </ul>
    </li>
    <li>
        <b>Other Content</b>
        <ul>
            <li><a href="../network.html">Museums & Installations</a></li>
        </ul>
    </li>
    <li>
        <b>Contributing</b>
        <ul>
            <li><a href="../contributing.html">Contributing</a></li>
            <li><a href="../future.html">Future Features</a></li>
        </ul>
    </li>
</ul>

    </div>
  </div>
</div>
</body>
<script src="/docs/assets/3rdparty/jquery.js"></script>
<script src="/docs/assets/js/lesson.js"></script>
<script src="/docs/assets/3rdparty/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51764205-4', 'auto');
  ga('send', 'pageview');

</script>


</html>



